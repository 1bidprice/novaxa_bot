# Διαχείριση Διαπιστευτηρίων Πρόσβασης - Enhanced Telegram Bot

Αυτό το έγγραφο περιγράφει τη διαχείριση των διαπιστευτηρίων πρόσβασης για το Enhanced Telegram Bot.

## Περιεχόμενα
1. [Εισαγωγή](#εισαγωγή)
2. [Διαπιστευτήρια Telegram](#διαπιστευτήρια-telegram)
3. [Διαπιστευτήρια API](#διαπιστευτήρια-api)
4. [Διαπιστευτήρια Ανάπτυξης](#διαπιστευτήρια-ανάπτυξης)
5. [Αποθήκευση Διαπιστευτηρίων](#αποθήκευση-διαπιστευτηρίων)
6. [Βέλτιστες Πρακτικές](#βέλτιστες-πρακτικές)
7. [Αντιμετώπιση Προβλημάτων](#αντιμετώπιση-προβλημάτων)

## Εισαγωγή

Η ασφαλής διαχείριση των διαπιστευτηρίων πρόσβασης είναι κρίσιμη για την ασφάλεια και τη σωστή λειτουργία του Enhanced Telegram Bot. Αυτό το έγγραφο παρέχει οδηγίες για τη διαχείριση των διαφόρων διαπιστευτηρίων που χρησιμοποιούνται από το bot.

## Διαπιστευτήρια Telegram

### Telegram Bot Token

Το Telegram Bot Token είναι το κύριο διαπιστευτήριο που απαιτείται για τη λειτουργία του bot. Είναι ένα μοναδικό αναγνωριστικό που παρέχεται από το Telegram και επιτρέπει στο bot σας να επικοινωνεί με το Telegram API.

#### Απόκτηση Bot Token

1. Ανοίξτε το Telegram και αναζητήστε το `@BotFather`
2. Στείλτε την εντολή `/newbot`
3. Ακολουθήστε τις οδηγίες για να δημιουργήσετε ένα νέο bot
4. Το BotFather θα σας δώσει ένα token που μοιάζει με αυτό: `123456789:ABCdefGhIJKlmNoPQRsTUVwxyZ`

#### Χρήση Bot Token

Το Bot Token πρέπει να αποθηκευτεί με ασφάλεια και να χρησιμοποιηθεί στη ρύθμιση του bot:

```python
# Παράδειγμα χρήσης στον κώδικα
from telegram.ext import Updater

def main():
    # Φόρτωση token από μεταβλητή περιβάλλοντος
    token = os.environ.get("TELEGRAM_BOT_TOKEN")
    
    # Δημιουργία updater με το token
    updater = Updater(token=token)
    
    # Συνέχεια με τη ρύθμιση του bot...
```

### Webhook Secret

Αν χρησιμοποιείτε webhook, μπορείτε να ορίσετε ένα μυστικό για πρόσθετη ασφάλεια:

```python
# Παράδειγμα ρύθμισης webhook με μυστικό
webhook_secret = os.environ.get("WEBHOOK_SECRET")
webhook_url = f"https://your-domain.com/webhook/{webhook_secret}"
updater.bot.set_webhook(url=webhook_url)
```

## Διαπιστευτήρια API

Το Enhanced Telegram Bot μπορεί να ενσωματωθεί με διάφορα εξωτερικά API. Κάθε API μπορεί να απαιτεί τα δικά του διαπιστευτήρια.

### Τύποι Διαπιστευτηρίων API

1. **API Keys**: Απλά κλειδιά που χρησιμοποιούνται για την αυθεντικοποίηση
2. **OAuth Tokens**: Tokens που αποκτώνται μέσω της διαδικασίας OAuth
3. **Username/Password**: Βασική αυθεντικοποίηση με όνομα χρήστη και κωδικό πρόσβασης
4. **JWT Tokens**: JSON Web Tokens για αυθεντικοποίηση και εξουσιοδότηση

### Διαχείριση Διαπιστευτηρίων API

Όλα τα διαπιστευτήρια API πρέπει να αποθηκεύονται με ασφάλεια και να φορτώνονται δυναμικά:

```python
# Παράδειγμα χρήσης API key
from api import APIClient

def get_weather(location):
    api_key = os.environ.get("WEATHER_API_KEY")
    client = APIClient(api_key=api_key)
    return client.get("weather", {"location": location})
```

## Διαπιστευτήρια Ανάπτυξης

Για την ανάπτυξη του bot σε διάφορες πλατφόρμες, μπορεί να χρειαστείτε πρόσθετα διαπιστευτήρια.

### Render

Για ανάπτυξη στο Render, χρειάζεστε:

1. **Λογαριασμό Render**: Εγγραφείτε στο [Render](https://render.com/)
2. **GitHub Integration**: Συνδέστε το Render με το GitHub για αυτόματη ανάπτυξη
3. **Μεταβλητές Περιβάλλοντος**: Ρυθμίστε τις μεταβλητές περιβάλλοντος στο Render dashboard

### Άλλες Πλατφόρμες

Για άλλες πλατφόρμες ανάπτυξης (Heroku, AWS, Google Cloud, κλπ.), συμβουλευτείτε την τεκμηρίωση της κάθε πλατφόρμας για τα απαιτούμενα διαπιστευτήρια.

## Αποθήκευση Διαπιστευτηρίων

### Τοπική Ανάπτυξη

Για τοπική ανάπτυξη, χρησιμοποιήστε αρχεία `.env`:

1. Δημιουργήστε ένα αρχείο `.env` στον κύριο κατάλογο του project
2. Προσθέστε τα διαπιστευτήρια σας:
   ```
   TELEGRAM_BOT_TOKEN=your_bot_token_here
   WEATHER_API_KEY=your_weather_api_key_here
   DATABASE_URL=your_database_url_here
   ```
3. Φορτώστε τις μεταβλητές στον κώδικα:
   ```python
   from dotenv import load_dotenv
   
   # Φόρτωση μεταβλητών από το .env
   load_dotenv()
   
   # Τώρα μπορείτε να αποκτήσετε πρόσβαση στις μεταβλητές
   token = os.environ.get("TELEGRAM_BOT_TOKEN")
   ```

### Παραγωγή

Για περιβάλλοντα παραγωγής, χρησιμοποιήστε τις μεταβλητές περιβάλλοντος της πλατφόρμας ανάπτυξης:

1. **Render**: Προσθέστε τις μεταβλητές στην καρτέλα "Environment" του dashboard
2. **Heroku**: Χρησιμοποιήστε την εντολή `heroku config:set` ή το dashboard
3. **Docker**: Χρησιμοποιήστε το αρχείο `docker-compose.yml` ή την εντολή `docker run -e`

### Αρχείο .gitignore

Βεβαιωθείτε ότι τα αρχεία που περιέχουν διαπιστευτήρια δεν συμπεριλαμβάνονται στον έλεγχο έκδοσης:

```
# .gitignore
.env
.env.*
credentials.json
secrets/
```

## Βέλτιστες Πρακτικές

### Ασφάλεια Διαπιστευτηρίων

1. **Μην αποθηκεύετε διαπιστευτήρια στον κώδικα**: Πάντα να φορτώνετε διαπιστευτήρια από μεταβλητές περιβάλλοντος ή αρχεία διαμόρφωσης
2. **Μην αποθηκεύετε διαπιστευτήρια σε δημόσια αποθετήρια**: Χρησιμοποιήστε το `.gitignore` για να αποκλείσετε αρχεία με διαπιστευτήρια
3. **Χρησιμοποιήστε διαφορετικά διαπιστευτήρια για ανάπτυξη και παραγωγή**: Αυτό περιορίζει τον κίνδυνο σε περίπτωση διαρροής
4. **Περιορίστε τα δικαιώματα**: Χρησιμοποιήστε διαπιστευτήρια με τα ελάχιστα απαραίτητα δικαιώματα
5. **Αλλάζετε τακτικά τα διαπιστευτήρια**: Ανανεώνετε τα διαπιστευτήρια περιοδικά για μεγαλύτερη ασφάλεια

### Διαχείριση Διαπιστευτηρίων σε Ομάδες

Αν εργάζεστε σε ομάδα:

1. **Χρησιμοποιήστε ένα σύστημα διαχείρισης μυστικών**: Εργαλεία όπως HashiCorp Vault, AWS Secrets Manager, ή Bitwarden
2. **Δημιουργήστε ένα πρότυπο .env**: Παρέχετε ένα αρχείο `.env.sample` με τις απαιτούμενες μεταβλητές αλλά χωρίς πραγματικές τιμές
3. **Τεκμηριώστε τη διαδικασία απόκτησης διαπιστευτηρίων**: Παρέχετε οδηγίες για το πώς τα μέλη της ομάδας μπορούν να αποκτήσουν τα απαραίτητα διαπιστευτήρια

## Αντιμετώπιση Προβλημάτων

### Κοινά Προβλήματα

1. **"Unauthorized" από το Telegram API**:
   - Ελέγξτε ότι το Bot Token είναι σωστό
   - Βεβαιωθείτε ότι το bot δεν έχει απενεργοποιηθεί από το BotFather

2. **"API rate limit exceeded"**:
   - Ελέγξτε τα όρια του API που χρησιμοποιείτε
   - Εφαρμόστε throttling ή caching για να μειώσετε τις κλήσεις API

3. **"Authentication failed" σε εξωτερικό API**:
   - Επαληθεύστε ότι το API key είναι σωστό
   - Ελέγξτε ότι το API key δεν έχει λήξει
   - Βεβαιωθείτε ότι έχετε τα σωστά δικαιώματα

### Διαγνωστικά Εργαλεία

1. **Έλεγχος Μεταβλητών Περιβάλλοντος**:
   ```python
   import os
   
   # Έλεγχος αν η μεταβλητή υπάρχει
   if "TELEGRAM_BOT_TOKEN" in os.environ:
       print("Token exists")
       # Εμφάνιση μόνο των πρώτων χαρακτήρων για ασφάλεια
       print(f"Token starts with: {os.environ.get('TELEGRAM_BOT_TOKEN')[:5]}...")
   else:
       print("Token not found in environment variables")
   ```

2. **Δοκιμή Σύνδεσης API**:
   ```python
   import requests
   
   def test_api_connection(api_key):
       url = "https://api.example.com/test"
       headers = {"Authorization": f"Bearer {api_key}"}
       
       try:
           response = requests.get(url, headers=headers)
           if response.status_code == 200:
               print("API connection successful")
               return True
           else:
               print(f"API error: {response.status_code} - {response.text}")
               return False
       except Exception as e:
           print(f"Connection error: {e}")
           return False
   ```

### Επαναφορά Διαπιστευτηρίων

Αν υποψιάζεστε ότι τα διαπιστευτήρια σας έχουν διαρρεύσει:

1. **Telegram Bot Token**: Επικοινωνήστε με το BotFather και χρησιμοποιήστε την εντολή `/revoke` για να ανακαλέσετε το τρέχον token και να λάβετε ένα νέο
2. **API Keys**: Συνδεθείτε στην πλατφόρμα του API και ανανεώστε ή ανακαλέστε το κλειδί
3. **Ενημερώστε όλα τα περιβάλλοντα**: Βεβαιωθείτε ότι ενημερώνετε τα νέα διαπιστευτήρια σε όλα τα περιβάλλοντα ανάπτυξης
