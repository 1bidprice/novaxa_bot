# Οδηγός Ανάπτυξης στην Πλατφόρμα Render - Enhanced Telegram Bot

Αυτός ο οδηγός περιγράφει τη διαδικασία ανάπτυξης του Enhanced Telegram Bot στην πλατφόρμα Render.

## Περιεχόμενα
1. [Εισαγωγή](#εισαγωγή)
2. [Προαπαιτούμενα](#προαπαιτούμενα)
3. [Δημιουργία Λογαριασμού Render](#δημιουργία-λογαριασμού-render)
4. [Προετοιμασία του Project](#προετοιμασία-του-project)
5. [Ρύθμιση Υπηρεσίας Web στο Render](#ρύθμιση-υπηρεσίας-web-στο-render)
6. [Ρύθμιση Μεταβλητών Περιβάλλοντος](#ρύθμιση-μεταβλητών-περιβάλλοντος)
7. [Ανάπτυξη του Bot](#ανάπτυξη-του-bot)
8. [Ρύθμιση Webhook](#ρύθμιση-webhook)
9. [Παρακολούθηση και Αντιμετώπιση Προβλημάτων](#παρακολούθηση-και-αντιμετώπιση-προβλημάτων)
10. [Συχνές Ερωτήσεις](#συχνές-ερωτήσεις)

## Εισαγωγή

Η πλατφόρμα [Render](https://render.com/) είναι μια σύγχρονη υπηρεσία cloud που προσφέρει εύκολη ανάπτυξη εφαρμογών web, υπηρεσιών και βάσεων δεδομένων. Είναι ιδανική για την ανάπτυξη του Enhanced Telegram Bot λόγω της απλότητας, της αξιοπιστίας και του δωρεάν επιπέδου που προσφέρει για μικρά projects.

## Προαπαιτούμενα

Πριν ξεκινήσετε, βεβαιωθείτε ότι έχετε:

1. Έναν λογαριασμό GitHub με το αποθετήριο του Enhanced Telegram Bot
2. Το token του Telegram bot από το BotFather
3. Όλα τα απαραίτητα αρχεία του bot (enhanced_bot.py, api.py, κλπ.)
4. Το αρχείο render_start.sh που περιλαμβάνεται στο project

## Δημιουργία Λογαριασμού Render

1. Επισκεφθείτε το [Render](https://render.com/) και κάντε κλικ στο "Sign Up"
2. Μπορείτε να εγγραφείτε χρησιμοποιώντας τον λογαριασμό GitHub σας ή με email
3. Ακολουθήστε τις οδηγίες για να ολοκληρώσετε την εγγραφή
4. Επιβεβαιώστε το email σας αν χρειάζεται

## Προετοιμασία του Project

Βεβαιωθείτε ότι το project σας περιλαμβάνει τα ακόλουθα αρχεία:

1. **requirements.txt**: Περιέχει όλες τις εξαρτήσεις Python
   ```
   python-telegram-bot>=13.0
   requests>=2.25.1
   psutil>=5.8.0
   flask>=2.0.1
   plotly>=5.3.1
   pandas>=1.3.3
   ```

2. **render_start.sh**: Script εκκίνησης για το Render
   ```bash
   #!/bin/bash
   # Script εκκίνησης για το Render
   
   # Εγκατάσταση εξαρτήσεων
   pip install -r requirements.txt
   
   # Εκκίνηση του bot
   python enhanced_bot.py
   ```

3. **.env.sample**: Πρότυπο για τις μεταβλητές περιβάλλοντος
   ```
   TELEGRAM_BOT_TOKEN=your_token_here
   DEBUG=true
   LOG_LEVEL=INFO
   WEBHOOK_ENABLED=true
   PORT=8443
   ```

## Ρύθμιση Υπηρεσίας Web στο Render

1. Συνδεθείτε στο [Render Dashboard](https://dashboard.render.com/)
2. Κάντε κλικ στο "New" και επιλέξτε "Web Service"
3. Συνδέστε το αποθετήριο GitHub που περιέχει το bot σας
   - Αν δεν έχετε συνδέσει το GitHub, θα σας ζητηθεί να το κάνετε
   - Επιλέξτε το αποθετήριο που περιέχει το Enhanced Telegram Bot
4. Συμπληρώστε τις ρυθμίσεις της υπηρεσίας:
   - **Name**: Ένα όνομα για την υπηρεσία σας (π.χ., "enhanced-telegram-bot")
   - **Environment**: "Python 3"
   - **Region**: Επιλέξτε την περιοχή που είναι πιο κοντά στους χρήστες σας
   - **Branch**: Η κύρια branch του αποθετηρίου σας (συνήθως "main" ή "master")
   - **Build Command**: `chmod +x render_start.sh`
   - **Start Command**: `./render_start.sh`
5. Επιλέξτε το κατάλληλο πλάνο:
   - Για δοκιμές, το δωρεάν πλάνο είναι επαρκές
   - Για παραγωγή, συνιστάται το πλάνο "Starter" ή υψηλότερο
6. Κάντε κλικ στο "Create Web Service"

## Ρύθμιση Μεταβλητών Περιβάλλοντος

Μετά τη δημιουργία της υπηρεσίας, πρέπει να ρυθμίσετε τις μεταβλητές περιβάλλοντος:

1. Στο dashboard της υπηρεσίας, πηγαίνετε στην καρτέλα "Environment"
2. Κάντε κλικ στο "Add Environment Variable"
3. Προσθέστε τις ακόλουθες μεταβλητές:
   - `TELEGRAM_BOT_TOKEN`: Το token του bot σας από το BotFather
   - `DEBUG`: `true` για περιβάλλον ανάπτυξης, `false` για παραγωγή
   - `LOG_LEVEL`: `INFO` (ή `DEBUG`, `WARNING`, `ERROR` ανάλογα με τις ανάγκες σας)
   - `WEBHOOK_ENABLED`: `true` για χρήση webhook, `false` για polling
   - `PORT`: `8443` (ή άλλη θύρα αν χρειάζεται)
4. Κάντε κλικ στο "Save Changes"

## Ανάπτυξη του Bot

Μετά τη ρύθμιση των μεταβλητών περιβάλλοντος, το Render θα ξεκινήσει αυτόματα την ανάπτυξη του bot σας. Μπορείτε να παρακολουθήσετε τη διαδικασία στην καρτέλα "Logs".

Η διαδικασία ανάπτυξης περιλαμβάνει:
1. Κλωνοποίηση του αποθετηρίου σας
2. Εκτέλεση της εντολής build
3. Εκτέλεση της εντολής start

Όταν η ανάπτυξη ολοκληρωθεί επιτυχώς, θα δείτε το μήνυμα "Starting Telegram bot..." στα logs και η κατάσταση της υπηρεσίας θα αλλάξει σε "Live".

## Ρύθμιση Webhook

Αν έχετε ενεργοποιήσει το webhook (`WEBHOOK_ENABLED=true`), πρέπει να ρυθμίσετε το Telegram για να στέλνει ενημερώσεις στο bot σας:

1. Αντιγράψτε το URL της υπηρεσίας σας από το Render dashboard (π.χ., `https://enhanced-telegram-bot.onrender.com`)
2. Προσθέστε το endpoint του webhook (π.χ., `/webhook`)
3. Επισκεφθείτε το ακόλουθο URL στο πρόγραμμα περιήγησής σας (αντικαταστήστε τα placeholders):
   ```
   https://api.telegram.org/bot<TELEGRAM_BOT_TOKEN>/setWebhook?url=<YOUR_RENDER_URL>/webhook
   ```
4. Θα πρέπει να λάβετε μια απάντηση JSON που επιβεβαιώνει ότι το webhook έχει οριστεί επιτυχώς

Εναλλακτικά, μπορείτε να χρησιμοποιήσετε το script `deploy.py` που περιλαμβάνεται στο project:

```bash
python deploy.py --set-webhook --url https://enhanced-telegram-bot.onrender.com/webhook
```

## Παρακολούθηση και Αντιμετώπιση Προβλημάτων

### Παρακολούθηση Logs

Μπορείτε να παρακολουθήσετε τα logs του bot σας στην καρτέλα "Logs" του Render dashboard. Αυτό είναι χρήσιμο για την αντιμετώπιση προβλημάτων και την παρακολούθηση της δραστηριότητας του bot.

### Κοινά Προβλήματα και Λύσεις

1. **Το bot δεν απαντά**:
   - Ελέγξτε ότι το token του bot είναι σωστό
   - Βεβαιωθείτε ότι το webhook έχει οριστεί σωστά
   - Ελέγξτε τα logs για σφάλματα

2. **Σφάλματα κατά την ανάπτυξη**:
   - Βεβαιωθείτε ότι το αρχείο requirements.txt περιλαμβάνει όλες τις εξαρτήσεις
   - Ελέγξτε ότι το script render_start.sh είναι εκτελέσιμο
   - Ελέγξτε τα logs για συγκεκριμένα σφάλματα

3. **Το webhook δεν λειτουργεί**:
   - Βεβαιωθείτε ότι το URL του webhook είναι σωστό
   - Ελέγξτε ότι η μεταβλητή `WEBHOOK_ENABLED` είναι `true`
   - Επαληθεύστε ότι το endpoint του webhook είναι σωστά υλοποιημένο στον κώδικα του bot

### Επανεκκίνηση της Υπηρεσίας

Αν αντιμετωπίζετε προβλήματα, μπορείτε να επανεκκινήσετε την υπηρεσία:

1. Πηγαίνετε στο dashboard της υπηρεσίας
2. Κάντε κλικ στο "Manual Deploy"
3. Επιλέξτε "Clear build cache & deploy"

## Συχνές Ερωτήσεις

### Πόσο κοστίζει η ανάπτυξη στο Render;

Το Render προσφέρει ένα δωρεάν επίπεδο που είναι επαρκές για μικρά bots. Ωστόσο, το δωρεάν επίπεδο έχει περιορισμούς:
- Η υπηρεσία "κοιμάται" μετά από 15 λεπτά αδράνειας
- Περιορισμένοι πόροι CPU και μνήμης
- 750 ώρες χρήσης ανά μήνα

Για παραγωγικά bots, συνιστάται το πλάνο "Starter" που ξεκινά από $7/μήνα και προσφέρει:
- Μόνιμη λειτουργία (χωρίς "ύπνο")
- Περισσότερους πόρους
- Καλύτερη απόδοση

### Πώς μπορώ να ενημερώσω το bot μου;

Για να ενημερώσετε το bot σας:

1. Κάντε push τις αλλαγές σας στο αποθετήριο GitHub
2. Το Render θα ανιχνεύσει αυτόματα τις αλλαγές και θα ξεκινήσει μια νέα ανάπτυξη
3. Εναλλακτικά, μπορείτε να κάνετε κλικ στο "Manual Deploy" για άμεση ενημέρωση

### Μπορώ να χρησιμοποιήσω προσαρμοσμένο domain;

Ναι, με τα επί πληρωμή πλάνα του Render μπορείτε να ρυθμίσετε ένα προσαρμοσμένο domain:

1. Πηγαίνετε στην καρτέλα "Settings" της υπηρεσίας σας
2. Κάντε κλικ στο "Custom Domain"
3. Ακολουθήστε τις οδηγίες για να ρυθμίσετε το domain σας

### Πώς μπορώ να παρακολουθήσω τη χρήση πόρων;

Το Render παρέχει βασικές μετρήσεις για την υπηρεσία σας:

1. Πηγαίνετε στην καρτέλα "Metrics" της υπηρεσίας σας
2. Μπορείτε να δείτε τη χρήση CPU, μνήμης και δικτύου
3. Για πιο προηγμένη παρακολούθηση, χρησιμοποιήστε τον πίνακα ελέγχου του Enhanced Telegram Bot

### Πώς μπορώ να χρησιμοποιήσω βάση δεδομένων με το bot μου;

Το Render προσφέρει υπηρεσίες βάσεων δεδομένων που μπορείτε να χρησιμοποιήσετε με το bot σας:

1. Πηγαίνετε στο Render dashboard και κάντε κλικ στο "New"
2. Επιλέξτε "PostgreSQL" ή άλλη βάση δεδομένων
3. Ρυθμίστε τη βάση δεδομένων σύμφωνα με τις ανάγκες σας
4. Προσθέστε τις πληροφορίες σύνδεσης ως μεταβλητές περιβάλλοντος στην υπηρεσία του bot σας
